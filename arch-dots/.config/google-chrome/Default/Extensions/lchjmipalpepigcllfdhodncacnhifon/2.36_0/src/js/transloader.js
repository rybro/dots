function imageTransloader(a){var d=chrome.extension.getBackgroundPage(),g=d.document.createElement("textarea");g.id="clipboard";d.document.body.appendChild(g);var e=a.srcUrl.substring(a.srcUrl.lastIndexOf("/")+1);/fbcdn\-sphotos/.test(a.srcUrl)&&(e="fb.jpg");""===e&&(e="something.jpg");var b=new XMLHttpRequest;b.open("GET",a.srcUrl,!0);b.responseType="arraybuffer";b.onreadystatechange=function(a){if(4===b.readyState)if(200===b.status){a=b.getResponseHeader("Content-Length");var d=b.getResponseHeader("Content-Type"),
f=new DataView(b.response),f=new Blob([f]);if(2097152<a&&"image/gif"===d)chrome.notifications.create("fail",{type:"basic",title:"Image transloading failed",message:"This gif is too big (>2MB)",iconUrl:"src/images/lueshi_48_i.png"},function(a){setTimeout(function(){clearNotification(a)},3E3)});else{a=new FormData;a.append("file",f,e);var c=new XMLHttpRequest;c.open("POST","http://u.endoftheinter.net/u.php",!0);c.onreadystatechange=function(a){if(4===c.readyState)if(200===c.status){a=document.createElement("html");
a.innerHTML=c.responseText;try{var b=a.getElementsByClassName("img")[0].getElementsByTagName("input")[0].value}catch(d){console.log("Error in response",a.innerHTML);return}a=document.getElementById("clipboard");a.value=b;a.select();document.execCommand("copy");chrome.notifications.create("succeed",{type:"basic",title:"Image transloaded",message:"The img code is now in your clipboard",iconUrl:"src/images/lueshi_48.png"},function(a){setTimeout(function(){clearNotification(a)},3E3)})}else console.log("Error ",
c.statusText)};c.send(a)}}else console.log("Error ",c.statusText)};b.send(null)}function clearNotification(a){chrome.notifications.clear(a,function(){})};
